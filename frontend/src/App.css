/* DOS Screen Container */
.dos-screen {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
}

/* Window Styles */
.window {
  position: absolute;
  min-width: calc(15 * var(--char-width));
  min-height: calc(5 * var(--char-height));
  background-color: var(--color-window-inactive);
  display: flex;
  flex-direction: column;
}

.window.active {
  background-color: var(--color-window-active);
}

/* Window Border - Single line style */
.window {
  outline: 1px solid var(--color-border-inactive);
}

.window.active {
  outline-color: var(--color-border-active);
}

/* DOS-style shadow using pseudo-elements for better character-based appearance */
.window::after {
  content: '';
  position: absolute;
  top: var(--char-height);
  left: 100%;
  bottom: calc(-1 * var(--char-height));
  width: var(--char-width);
  background-color: var(--color-shadow);
  background-image: repeating-linear-gradient(
    to bottom,
    transparent 0,
    transparent 50%,
    var(--color-background) 50%,
    var(--color-background) 100%
  );
  background-size: 100% var(--char-height);
}

.window::before {
  content: '';
  position: absolute;
  top: 100%;
  left: var(--char-width);
  right: calc(-1 * var(--char-width));
  height: var(--char-height);
  background-color: var(--color-shadow);
  background-image: repeating-linear-gradient(
    to right,
    transparent 0,
    transparent 50%,
    var(--color-background) 50%,
    var(--color-background) 100%
  );
  background-size: var(--char-width) 100%;
}

/* Title Bar */
.title-bar {
  height: var(--char-height);
  display: flex;
  align-items: center;
  border-bottom: 1px solid currentColor;
  flex: 0 0 auto;
  background-color: inherit;
  padding: 0;
}

/* Window Controls */
.close-button,
.maximize-button {
  flex: 0 0 var(--char-width);
  width: var(--char-width);
  text-align: center;
  cursor: pointer;
  font-family: monospace;
}

.close-button {
  margin-left: var(--char-width);
}

.maximize-button {
  margin-right: var(--char-width);
}

.title {
  flex: 1;
  margin: 0 var(--char-width);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-family: monospace;
}

/* Window Content */
.window-content {
  flex: 1;
  padding: var(--char-height) var(--char-width);
  overflow: auto;
  position: relative;
  min-height: calc(3 * var(--char-height));
  font-family: monospace;
  white-space: pre;
}

/* Resize Handle */
.resize-handle {
  position: absolute;
  right: 0;
  bottom: 0;
  width: var(--char-width);
  height: var(--char-height);
  cursor: se-resize;
  display: flex;
  align-items: center;
  justify-content: center;
}

.resize-handle::after {
  content: '.';
  color: var(--color-border-active);
  font-family: monospace;
}

/* Cursor Styles */
.dos-screen:not(.dragging) * {
  cursor: default;
}

.dos-screen.dragging * {
  cursor: move;
}

/* Active Window Styles */
.window.active .title-bar {
  border-bottom-color: var(--color-border-active);
}

.window.active .resize-handle::after {
  color: var(--color-border-active);
}

/* Window Focus Styles */
.window:not(.active) {
  opacity: 0.9;
}

/* Ensure crisp edges */
.window,
.title-bar,
.window-content {
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  -webkit-font-smoothing: none;
  font-smooth: never;
}

/* Text selection prevention */
.window * {
  user-select: none;
}
